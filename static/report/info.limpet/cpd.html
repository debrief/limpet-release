<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.4 at 2017-09-04 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>info.limpet - CPD Results</title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
    <meta name="Date-Revision-yyyymmdd" content="20170904" />
    <meta http-equiv="Content-Language" content="en" />
        
        </head>
  <body class="composite">
    <div id="banner">
                    <div id="bannerLeft">
                info.limpet
                </div>
                    <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
                    
                <div class="xleft">
        <span id="publishDate">Last Published: 2017-09-04</span>
                  &nbsp;| <span id="projectVersion">Version: 1.0.6-SNAPSHOT</span>
                      </div>
            <div class="xright">                    <a href="${project.url}" title="info.limpet">info.limpet</a>
              
                    
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
                    
                                <h5>Parent Project</h5>
                  <ul>
                  <li class="none">
                          <a href="../index.html" title="parent">parent</a>
            </li>
          </ul>
                       <h5>Project Documentation</h5>
                  <ul>
                                                                                                                                                                                <li class="collapsed">
                          <a href="project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                                                                                    <li class="expanded">
                          <a href="project-reports.html" title="Project Reports">Project Reports</a>
                    <ul>
                      <li class="none">
                          <a href="findbugs.html" title="FindBugs">FindBugs</a>
            </li>
                      <li class="none">
            <strong>CPD</strong>
          </li>
                      <li class="none">
                          <a href="pmd.html" title="PMD">PMD</a>
            </li>
                      <li class="none">
                          <a href="checkstyle.html" title="Checkstyle">Checkstyle</a>
            </li>
              </ul>
        </li>
          </ul>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                   
                    
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <div class="section">
<h2>CPD Results<a name="CPD_Results"></a></h2>
<p>The following document contains the results of PMD's  <a class="externalLink" href="http://pmd.sourceforge.net/cpd.html">CPD</a> 5.3.5.</p></div>
<div class="section">
<h2>Duplications<a name="Duplications"></a></h2>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>info/limpet/operations/spatial/DopplerShiftBetweenTracksOperation.java</td>
<td>592</td></tr>
<tr class="a">
<td>info/limpet/operations/spatial/TwoTrackOperation.java</td>
<td>313</td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>  }

  public CollectionComplianceTests getATests()
  {
    return aTests;
  }

  /**
   * utility operation to extract the location datasets from the selection (walking down into groups
   * as necessary)
   * 
   * @param selection
   * @return
   */
  protected List&lt;IStoreItem&gt; getLocationDatasets(
      final List&lt;IStoreItem&gt; selection)
  {
    final List&lt;IStoreItem&gt; collatedTracks = new ArrayList&lt;IStoreItem&gt;();

    // hmm, they may be composite tracks - extract the location data
    final Iterator&lt;IStoreItem&gt; sIter = selection.iterator();
    while (sIter.hasNext())
    {
      final IStoreItem iStoreItem = sIter.next();
      if (iStoreItem instanceof IStoreGroup)
      {
        final IStoreGroup group = (IStoreGroup) iStoreItem;
        final Iterator&lt;IStoreItem&gt; kids = group.iterator();
        while (kids.hasNext())
        {
          final IStoreItem thisItem = kids.next();
          if (thisItem instanceof LocationDocument)
          {
            final IStoreItem thisI = thisItem;
            collatedTracks.add(thisI);
          }
        }
      }
      else if (iStoreItem instanceof LocationDocument)
      {
        collatedTracks.add(iStoreItem);
      }
    }
    return collatedTracks;
  }</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>info/limpet/persistence/rep/RepParser.java</td>
<td>559</td></tr>
<tr class="a">
<td>info/limpet/persistence/rep/RepParser.java</td>
<td>820</td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>    final String symbology = st.nextToken(normalDelimiters);

    latDeg = Double.parseDouble(st.nextToken());
    latMin = Double.parseDouble(st.nextToken());
    latSec = Double.parseDouble(st.nextToken());

    /**
     * now, we may have trouble here, since there may not be a space between the hemisphere
     * character and a 3-digit latitude value - so BE CAREFUL
     */
    final String vDiff = st.nextToken();
    if (vDiff.length() &gt; 3)
    {
      // hmm, they are combined
      latHem = vDiff.charAt(0);
      final String secondPart = vDiff.substring(1, vDiff.length());
      longDeg = Double.parseDouble(secondPart);
    }
    else
    {
      // they are separate, so only the hem is in this one
      latHem = vDiff.charAt(0);
      longDeg = Double.parseDouble(st.nextToken());
    }
    longMin = Double.parseDouble(st.nextToken());
    longSec = Double.parseDouble(st.nextToken());
    longHem = st.nextToken().charAt(0);</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>info/limpet/persistence/rep/RepParser.java</td>
<td>561</td></tr>
<tr class="a">
<td>info/limpet/persistence/rep/RepParser.java</td>
<td>669</td></tr>
<tr class="b">
<td>info/limpet/persistence/rep/RepParser.java</td>
<td>823</td></tr>
<tr class="a"><td colspan='2'>
<div>
<pre>    latDeg = Double.parseDouble(st.nextToken());
    latMin = Double.parseDouble(st.nextToken());
    latSec = Double.parseDouble(st.nextToken());

    /**
     * now, we may have trouble here, since there may not be a space between the hemisphere
     * character and a 3-digit latitude value - so BE CAREFUL
     */
    final String vDiff = st.nextToken();
    if (vDiff.length() &gt; 3)
    {
      // hmm, they are combined
      latHem = vDiff.charAt(0);
      final String secondPart = vDiff.substring(1, vDiff.length());
      longDeg = Double.parseDouble(secondPart);
    }
    else
    {
      // they are separate, so only the hem is in this one
      latHem = vDiff.charAt(0);
      longDeg = Double.parseDouble(st.nextToken());
    }
    longMin = Double.parseDouble(st.nextToken());
    longSec = Double.parseDouble(st.nextToken());
    longHem = st.nextToken().charAt(0);</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Line</th></tr>
<tr class="a">
<td>info/limpet/analysis/QuantityFrequencyBins.java</td>
<td>174</td></tr>
<tr class="b">
<td>info/limpet/analysis/TimeFrequencyBins.java</td>
<td>164</td></tr>
<tr class="a"><td colspan='2'>
<div>
<pre>                (QuantityFrequencyBins.Bin) bIter.next();
            freqBins.append((int) bin.getLowerVal());
            freqBins.append(&quot;-&quot;);
            freqBins.append((int) bin.getUpperVal());
            freqBins.append(&quot;: &quot;);
            freqBins.append(bin.getFreqVal());
            freqBins.append(&quot;, &quot;);

          }

          titles.add(&quot;Frequency bins&quot;);
          values.add(freqBins.toString());
        }
      }
    }

    if (titles.size() &gt; 0)
    {
      presentResults(titles, values);
    }

  }

  private boolean appliesTo(List&lt;IStoreItem&gt; selection)
  {
    return aTests.allCollections(selection) &amp;&amp; aTests.allQuantity(selection)</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Line</th></tr>
<tr class="a">
<td>info/limpet/analysis/QuantityFrequencyBins.java</td>
<td>139</td></tr>
<tr class="b">
<td>info/limpet/analysis/TimeFrequencyBins.java</td>
<td>130</td></tr>
<tr class="a"><td colspan='2'>
<div>
<pre>      for (int i = 0; i &lt; histogram.length; i++)
      {
        long l = histogram[i];
        res.add(new Bin(rangeSoFar, rangeSoFar + rangeStep, l));
        rangeSoFar += rangeStep;
      }
    }
    return res;
  }

  @Override
  public void analyse(List&lt;IStoreItem&gt; selection)
  {
    List&lt;String&gt; titles = new ArrayList&lt;String&gt;();
    List&lt;String&gt; values = new ArrayList&lt;String&gt;();

    // check compatibility
    if (appliesTo(selection) &amp;&amp; selection.size() == 1)
    {
      // ok, let's go for it.
      for (Iterator&lt;IStoreItem&gt; iter = selection.iterator(); iter.hasNext();)
      {</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Line</th></tr>
<tr class="a">
<td>info/limpet/operations/arithmetic/BinaryQuantityOperation.java</td>
<td>279</td></tr>
<tr class="b">
<td>info/limpet/operations/arithmetic/BulkQuantityOperation.java</td>
<td>291</td></tr>
<tr class="a"><td colspan='2'>
<div>
<pre>      final boolean allIndexed = getATests().allEqualIndexed(selection);
      final boolean suitableForIndexedInterpolation =
          getATests().suitableForIndexedInterpolation(selection);
      // final boolean hasIndexed = getATests().hasIndexed(selection);
      if (allIndexed &amp;&amp; suitableForIndexedInterpolation /* || hasIndexed */)
      {
        addInterpolatedCommands(selection, destination, res, context);
      }
      else if (getATests().allEqualLengthOrSingleton(selection))
      {
        // instead, offer our indexed commands?
        addIndexedCommands(selection, destination, res, context);
      }
    }
    return res;
  }

  /**
   * produce any new commands for this s election
   * 
   * @param selection
   *          current selection
   * @param destination
   *          where the results will end up
   * @param commands
   *          the list of commands
   */
  protected abstract void addIndexedCommands(List&lt;IStoreItem&gt; selection,
      IStoreGroup destination, Collection&lt;ICommand&gt; commands, IContext context);

  /**
   * add any commands that require temporal interpolation
   * 
   * @param selection
   * @param destination
   * @param res
   */
  protected abstract void addInterpolatedCommands(List&lt;IStoreItem&gt; selection,
      IStoreGroup destination, Collection&lt;ICommand&gt; res, IContext context);

  /**
   * determine if this dataset is suitable
   * 
   * @param selection
   * @return
   */
  protected abstract boolean appliesTo(List&lt;IStoreItem&gt; selection);

  protected IDocument&lt;?&gt; getLongestIndexedCollection(</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Line</th></tr>
<tr class="a">
<td>info/limpet/impl/LocationDocument.java</td>
<td>109</td></tr>
<tr class="b">
<td>info/limpet/impl/StringDocument.java</td>
<td>46</td></tr>
<tr class="a"><td colspan='2'>
<div>
<pre>    ObjectDataset dataset = (ObjectDataset) this.getDataset();
    final AxesMetadata axesMetadata =
        dataset.getFirstMetadata(AxesMetadata.class);
    final IndexIterator iterator = dataset.getIterator();

    final DoubleDataset axisDataset;
    if (axesMetadata != null &amp;&amp; axesMetadata.getAxes().length &gt; 0)
    {
      DoubleDataset doubleAxis = (DoubleDataset) axesMetadata.getAxes()[0];
      axisDataset = doubleAxis != null ? doubleAxis : null;
    }
    else
    {
      axisDataset = null;
    }

    res.append(dataset.getName() + &quot;:\n&quot;);
    while (iterator.hasNext())
    {
      final String indexVal;
      if (axisDataset != null)
      {
        indexVal = &quot;&quot; + axisDataset.getElementDoubleAbs(iterator.index);</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Line</th></tr>
<tr class="a">
<td>info/limpet/persistence/csv/CsvParser.java</td>
<td>445</td></tr>
<tr class="b">
<td>info/limpet/persistence/csv/CsvParser.java</td>
<td>537</td></tr>
<tr class="a"><td colspan='2'>
<div>
<pre>    protected StringImporter()
    {
      super(null, null, (String) null);
    }

    @Override
    public void consume(final IDocumentBuilder&lt;?&gt; series,
        final double theIndex, final int colStart, final CSVRecord row)
    {
      final String thisVal = row.get(colStart);
      final StringDocumentBuilder builder = (StringDocumentBuilder) series;
      builder.add(theIndex, thisVal);
    }

    @Override
    public IDocumentBuilder&lt;?&gt; create(final String name,
        final Unit&lt;?&gt; indexUnits)
    {
      final StringDocumentBuilder res =
          new StringDocumentBuilder(name, null, indexUnits);
      return res;
    }
  }</pre></div></td></tr></table></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                   2017.
          All Rights Reserved.      
                    
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
