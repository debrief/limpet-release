<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.4 at 2017-09-04 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>info.limpet.ui - CPD Results</title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
    <meta name="Date-Revision-yyyymmdd" content="20170904" />
    <meta http-equiv="Content-Language" content="en" />
        
        </head>
  <body class="composite">
    <div id="banner">
                    <div id="bannerLeft">
                info.limpet.ui
                </div>
                    <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
                    
                <div class="xleft">
        <span id="publishDate">Last Published: 2017-09-04</span>
                  &nbsp;| <span id="projectVersion">Version: 1.0.6-SNAPSHOT</span>
                      </div>
            <div class="xright">                    <a href="${project.url}" title="info.limpet.ui">info.limpet.ui</a>
              
                    
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
                    
                                <h5>Parent Project</h5>
                  <ul>
                  <li class="none">
                          <a href="../index.html" title="parent">parent</a>
            </li>
          </ul>
                       <h5>Project Documentation</h5>
                  <ul>
                                                                                                                                                                                <li class="collapsed">
                          <a href="project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                                                                                    <li class="expanded">
                          <a href="project-reports.html" title="Project Reports">Project Reports</a>
                    <ul>
                      <li class="none">
                          <a href="findbugs.html" title="FindBugs">FindBugs</a>
            </li>
                      <li class="none">
            <strong>CPD</strong>
          </li>
                      <li class="none">
                          <a href="pmd.html" title="PMD">PMD</a>
            </li>
                      <li class="none">
                          <a href="checkstyle.html" title="Checkstyle">Checkstyle</a>
            </li>
              </ul>
        </li>
          </ul>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                   
                    
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <div class="section">
<h2>CPD Results<a name="CPD_Results"></a></h2>
<p>The following document contains the results of PMD's  <a class="externalLink" href="http://pmd.sourceforge.net/cpd.html">CPD</a> 5.3.5.</p></div>
<div class="section">
<h2>Duplications<a name="Duplications"></a></h2>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>info/limpet/ui/data_provider/data/DataManagerDropAdapter.java</td>
<td>40</td></tr>
<tr class="a">
<td>info/limpet/ui/editors/dnd/DataManagerDropAdapter.java</td>
<td>40</td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>public class DataManagerDropAdapter extends ViewerDropAdapter
{

  private IStoreGroup _store;

  public DataManagerDropAdapter(Viewer viewer, IStoreGroup store)
  {
    super(viewer);
    this._store = store;
  }

  @Override
  public boolean performDrop(Object data)
  {
    if (!(data instanceof String[]) &amp;&amp; !(data instanceof List[])
        &amp;&amp; !(data instanceof String))
    {
      return false;
    }
    if (data instanceof String[])
    {
      String[] fileNames = (String[]) data;
      return filesDropped(fileNames);
    }
    if (data instanceof String)
    {
      // ok, it's some data from the control itself.

      final boolean validTarget;
      final Object target = getCurrentTarget();
      if (target == getSelectedObject())
      {
        return false;
      }
      if (target == null)
      {
        validTarget = true;
      }
      else if (target instanceof GroupWrapper)
      {
        validTarget = true;
      }
      else
      {
        validTarget = false;
      }

      if (!validTarget)
      {
        return false;
      }
      else
      {
        String str = (String) data;
        String[] items = str.split(LimpetDragListener.SEPARATOR);
        for (int i = 0; i &lt; items.length; i++)
        {
          String thisS = items[i];

          // find the item
          IStoreItem item = _store.get(UUID.fromString(thisS));

          if (item == null)
          {
            Activator.logError(Status.ERROR,</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>info/limpet/ui/heatmap/Helper2D.java</td>
<td>123</td></tr>
<tr class="a">
<td>info/limpet/ui/heatmap/Helper2D.java</td>
<td>278</td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>  public static HContainer convert(final DoubleDataset dataset)
  {
    final HContainer res = new HContainer();

    // ok, start by changing the table columns to the correct size
    // sort out the axes
    List&lt;AxesMetadata&gt; amList;
    try
    {
      amList = dataset.getMetadata(AxesMetadata.class);
      final AxesMetadata am = amList.get(0);
      final ILazyDataset[] axes = am.getAxes();
      if (axes.length != 2)
      {
        return null;
      }
      final DoubleDataset aOne = (DoubleDataset) axes[0];
      final DoubleDataset aTwo = (DoubleDataset) axes[1];

      final double[] aIndices = aOne.getData();
      res.rowTitles = aIndices;
      final double[] bIndices = aTwo.getData();
      res.colTitles = bIndices;

      res.values = new double[aIndices.length][bIndices.length];
      for (int i = 0; i &lt; aIndices.length; i++)
      {
        for (int j = 0; j &lt; bIndices.length; j++)
        {</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>info/limpet/ui/propertyeditors/SliderCellEditor.java</td>
<td>42</td></tr>
<tr class="a">
<td>info/limpet/ui/propertyeditors/SliderCellEditorExt.java</td>
<td>31</td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>  public SliderCellEditor(final Composite parent, int minValue, int maxValue)
  {
    super(parent, SWT.NONE);
    this.minValue = minValue;
    this.maxValue = maxValue;
  }

  /**
   * @return
   */
  public LayoutData getLayoutData()
  {
    final CellEditor.LayoutData res = super.getLayoutData();
    res.grabHorizontal = true;
    return res;
  }

  protected Control createControl(final Composite parent)
  {
    final Font font = parent.getFont();
    final Color bg = parent.getBackground();

    _myControl = new Composite(parent, getStyle());
    _myControl.setFont(font);
    _myControl.setBackground(bg);

    final GridLayout rl = new GridLayout();
    rl.marginWidth = 0;
    rl.marginHeight = 0;
    rl.numColumns = 8;

    _myControl.setLayout(rl);
    _myLabel = new Label(_myControl, SWT.NONE);
    _myLabel.setText(&quot;000&quot;);
    _myLabel.pack();</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>info/limpet/ui/data_provider/data/DataManagerDropAdapter.java</td>
<td>119</td></tr>
<tr class="a">
<td>info/limpet/ui/editors/dnd/DataManagerDropAdapter.java</td>
<td>119</td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>              IStoreGroup mem = (IStoreGroup) _store;
              mem.remove(item);
            }
          }

          // sort out the object
          if (target instanceof GroupWrapper)
          {
            GroupWrapper group = (GroupWrapper) target;
            // and add to the new one
            group.getGroup().add(item);
          }
          else
          {
            // ok, put it at the top level
            _store.add(item);
          }
        }
        changed();
        return true;
      }

    }
    // else if (data instanceof List[])
    // {
    // Object target = getCurrentTarget();
    // if (target == getSelectedObject())
    // {
    // return false;
    // }
    // if (target instanceof GroupWrapper)
    // {
    // for (@SuppressWarnings(&quot;rawtypes&quot;)
    // List list : (List[]) data)
    // {
    // for (Object object : list)
    // {
    // if (object instanceof GroupWrapper)
    // {
    // GroupWrapper groupWrapper = (GroupWrapper) object;
    // List&lt;IStoreItem&gt; l = new ArrayList&lt;IStoreItem&gt;();
    // StoreGroup storeGroup = new StoreGroup(groupWrapper.toString());
    // l.add(storeGroup);
    // storeGroup.addAll(groupWrapper.getGroup());
    // ((GroupWrapper) target).getGroup().addAll(l);
    // }
    // else if (object instanceof CollectionWrapper)
    // {
    // CollectionWrapper collectionWrapper = (CollectionWrapper) object;
    // ((GroupWrapper) target).getGroup().add(
    // collectionWrapper.getCollection());
    // }
    // }
    // }
    // changed();
    // return true;
    // }
    // }
    return false;
  }

  @Override
  public boolean validateDrop(Object target, int operation,
      TransferData transferType)
  {
    boolean validTarget = target == null || target instanceof GroupWrapper;

    return FileTransfer.getInstance().isSupportedType(transferType)
        || TextTransfer.getInstance().isSupportedType(transferType)
        || validTarget;
  }

  private boolean filesDropped(String[] fileNames)
  {
    if (fileNames != null)
    {
      for (int i = 0; i &lt; fileNames.length; i++)
      {
        String fileName = fileNames[i];
        if (fileName != null &amp;&amp; fileName.toLowerCase().endsWith(&quot;.csv&quot;))</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>info/limpet/ui/data_provider/data/OperationWrapper.java</td>
<td>28</td></tr>
<tr class="a">
<td>info/limpet/ui/editors/OperationWrapper.java</td>
<td>28</td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>public class OperationWrapper extends Action
{
	private final IOperation limpetAction;
	private final IContext context;
	private final IStoreGroup store;
	private final ISelectionProvider provider;

	public OperationWrapper(IOperation limpetAction, String title,
			ImageDescriptor imageDescriptor, IContext context, IStoreGroup store,
			ISelectionProvider provider)
	{
		this.limpetAction = limpetAction;
		this.context = context;
		this.store = store;
		this.provider = provider;
		setText(title);
		setImageDescriptor(imageDescriptor);
	}

	@Override
	public void run()
	{
		Collection&lt;ICommand&gt; ops = limpetAction.actionsFor(
				provider.getSelection(), store, context);
		if (ops != null &amp;&amp; ops.size() == 1)
		{
			ICommand first = ops.iterator().next();
			first.execute();
		}
		else
		{
			context.openWarning(&quot;Error&quot;,
					&quot;Cannot run the action for current selection&quot;);
		}
	}
}</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>info/limpet/ui/heatmap/Helper2D.java</td>
<td>166</td></tr>
<tr class="a">
<td>info/limpet/ui/heatmap/Helper2D.java</td>
<td>405</td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>  public static HContainer convertToMean(final List&lt;IStoreItem&gt; items)
  {
    // sort out the helper
    final ListConverterHelper helper;
    final IStoreItem first = items.get(0);
    if (first instanceof NumberDocument)
    {
      helper = new ListConverterHelper()
      {

        @Override
        public HContainer convertMe(final IStoreItem item)
        {
          final NumberDocument nd = (NumberDocument) item;
          final DoubleDataset ds = (DoubleDataset) nd.getDataset();
          return convert(ds);
        }
      };
    }
    else if (first instanceof DoubleListDocument)
    {
      helper = new ListConverterHelper()
      {

        @Override
        public HContainer convertMe(final IStoreItem item)
        {
          final DoubleListDocument nd = (DoubleListDocument) item;
          final ObjectDataset ds = (ObjectDataset) nd.getDataset();
          return convert(ds, false);</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>info/limpet/ui/data_frequency/DataFrequencyView.java</td>
<td>216</td></tr>
<tr class="a">
<td>info/limpet/ui/time_frequency/TimeFrequencyView.java</td>
<td>152</td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>        newSeries.setYSeries(yData);

        // adjust the axis range
        chart.getAxisSet().adjustRange();
        IAxis xAxis = chart.getAxisSet().getXAxis(0);
        xAxis.enableCategory(false);

        // set the y axis min to be zero
        Range yRange = chart.getAxisSet().getYAxis(0).getRange();
        chart.getAxisSet().getYAxis(0).setRange(new Range(0, yRange.upper));

        chart.redraw();
      }
    }
  }

  @Override
  public void setFocus()
  {
    chart.setFocus();
  }

  @Override
  protected boolean appliesToMe(List&lt;IStoreItem&gt; selection,
      CollectionComplianceTests tests)
  {
    final boolean res;
    if(!tests.allOneDim(selection))</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>info/limpet/ui/propertyeditors/SliderCellEditor.java</td>
<td>79</td></tr>
<tr class="a">
<td>info/limpet/ui/propertyeditors/SliderCellEditorExt.java</td>
<td>69</td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>    _myLabel.setLayoutData(gd1);

    _theSlider = new Slider(_myControl, SWT.HORIZONTAL);
    final GridData gd2 = new GridData(GridData.FILL_HORIZONTAL);
    gd2.horizontalSpan = 7;
    _theSlider.setLayoutData(gd2);
    _theSlider.addSelectionListener(new SelectionListener()
    {

      public void widgetSelected(final SelectionEvent e)
      {
        _myLabel.setText(formatMe(_theSlider.getSelection()));
        _myLabel.update();
      }

      public void widgetDefaultSelected(final SelectionEvent e)
      {

      }
    });

    return _myControl;
  }

  protected Object doGetValue()
  {
    Object res = null;
    if (_theSlider != null)
    {</pre></div></td></tr></table></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                   2017.
          All Rights Reserved.      
                    
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
